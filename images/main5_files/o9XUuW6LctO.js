if (self.CavalryLogger) { CavalryLogger.start_js(["xJQmf"]); }

__d("MercuryPagesGreetingContainer.react",["cx","fbt","invariant","ix","CurrentUser","Grid.react","Image.react","Link.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MessagingTag","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MessengerEnvironment","OrganicIntakeFormMutationUtils","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React","StoreAndPropBasedStateMixin","fbglyph","ifRequired"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MercuryMessageActions").get(),l=b("Grid.react").GridItem;a=b("React").PropTypes;var m=function(a){var c=function(){var c=new(b("MercuryMessageObject"))(b("CurrentUser").getID());k.send(c.constructUserGeneratedMessageObject(a.icebreakerTextForOrganicIntakeForm,"source:titan:web",a.threadID,null,null,null));b("OrganicIntakeFormMutationUtils").triggerOrganicIntakeForm(b("CurrentUser").getID(),a.pageID)};return b("React").jsx(b("Link.react"),{className:"_7bl6",href:"#",onClick:c,children:a.icebreakerTextForOrganicIntakeForm})},n=function(a){__p&&__p();var c=[];b("ifRequired")("FantaAppStore",function(d){d=d.getState().tabGroup.tabs.get(b("MercuryIDs").getThreadIDFromUserID(a.pageID));c=[b("MessagingTag").ONE_CLICK_MESSAGE];d&&d.entryPoint&&d.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(d.entryPoint[0])!==-1&&c.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([d.entryPoint[0]]))});var d=function(){var d=new(b("MercuryMessageObject"))(b("CurrentUser").getID());k.send(d.constructUserGeneratedMessageObject(a.message,"source:titan:web",a.threadID,null,null,c));b("PagesLogger").log(a.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,"www_chat_null_state",["pages_messaging_www","PagesComms","OneClick"],{message:a.messageType,position:a.position})};return b("React").jsx("a",{className:"_7bl6",href:"#",onClick:d,children:a.message})};c=b("React").createClass({displayName:"MercuryPagesGreetingContainer",propTypes:{threadID:a.string.isRequired},mixins:[b("StoreAndPropBasedStateMixin")(b("PagesMessagingMercuryChatTabStore"))],statics:{calculateState:function(a){a=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);return{shouldShowGreetingMessage:a.pagesGreetingShouldShow&&a.pagesGreetingContent&&a.pagesGreetingContent.length>0,shouldShowIcebreakers:a.icebreakers&&Object.keys(a.icebreakers).length>0,greetingMessage:a.pagesGreetingContent,pageResponsiveness:a.pageResponsiveness,connectionContext:a.connectionContext,pageOnlineMessage:a.pageOnlineMessage,showOrganicIntakeForm:a.showOrganicIntakeForm,icebreakerTextForOrganicIntakeForm:a.icebreakerTextForOrganicIntakeForm}}},getInitialState:function(){return{loggedButtonImpressions:[]}},componentDidMount:function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)},render:function(){var a;this.state.shouldShowIcebreakers?a=this._renderIcebreakers():this.state.showOrganicIntakeForm&&(a=this._getOrganicIntakeFormIcebreaker());return b("React").jsxs("div",{children:[b("React").jsxs(b("Grid.react"),{alignv:"top",className:(b("MessengerEnvironment").messengerui?"_7bl7":"")+(b("MessengerEnvironment").messengerui?"":" _7bkq"),cols:2,spacing:"_7bkr",children:[this._renderTopRow(),this._renderSubRow()]}),a]})},_renderIcebreakers:function(){__p&&__p();var a=this,c=b("PagesMessagingMercuryChatTabStore").getStateByThread(this.props.threadID).icebreakers;c!==void 0&&c!==null||i(0,2536);var d=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);d!==void 0&&d!==null||i(0,2537);this.state.showOrganicIntakeForm&&(c=c.slice(0,c.length-1));c=c.map(function(c,e){var f=c.messageKey;a._maybeLogOneClickMessageImpression(d,f,e);return b("React").jsx(l,{children:b("React").jsx(n,{message:String(c.message),messageType:f,pageID:d,position:e,threadID:a.props.threadID})},f)});return b("React").jsxs(b("Grid.react"),{alignh:"center",className:"_7bks",cols:1,children:[this.state.showOrganicIntakeForm&&b("React").jsx(m,{icebreakerTextForOrganicIntakeForm:this.state.icebreakerTextForOrganicIntakeForm,pageID:d,threadID:this.props.threadID}),c]})},_getOrganicIntakeFormIcebreaker:function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);a!==void 0&&a!==null||i(0,2537);return this.state.icebreakerTextForOrganicIntakeForm?b("React").jsx(b("Grid.react"),{alignh:"center",className:"_7bks",cols:1,children:b("React").jsx(m,{icebreakerTextForOrganicIntakeForm:this.state.icebreakerTextForOrganicIntakeForm,pageID:a,threadID:this.props.threadID})}):null},_renderTopRow:function(){if(this.state.pageOnlineMessage)return this._renderOnlineMessage();return this.state.pageResponsiveness?this._renderPageResponsiveness():null},_renderSubRow:function(){return this.state.shouldShowGreetingMessage?[b("React").jsx(l,{className:"_7bl8",children:b("React").jsx(b("Image.react"),{src:j("124738")})},"messenger_greeting_icon"),b("React").jsx(l,{className:"_7bl9",children:this.state.greetingMessage},"messenger_greeting_text")]:this._renderConnectionContext()},_renderOnlineMessage:function(){return[b("React").jsx(l,{className:"_7bla",children:b("React").jsx(b("Image.react"),{src:j("311943")})},"online_indicator_icon"),b("React").jsx(l,{className:"_7blb",children:this.state.pageOnlineMessage},"online_indicator_text")]},_renderPageResponsiveness:function(){return[b("React").jsx(l,{children:b("React").jsx(b("Image.react"),{src:j("124279")})},"page_responsiveness_icon"),b("React").jsx(l,{className:"_7blb",children:this.state.pageResponsiveness},"page_responsiveness_text")]},_renderConnectionContext:function(){return!this.state.connectionContext?null:[b("React").jsx(l,{className:"_7bl8",children:b("React").jsx(b("Image.react"),{src:j("124577")})},"connection_context_icon"),b("React").jsx(l,{className:"_7bl9",children:this.state.connectionContext},"connection_context_text")]},_maybeLogOneClickMessageImpression:function(a,c,d){var e=this.state.loggedButtonImpressions;if(e.indexOf(c)>=0)return;b("PagesLogger").log(a,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").MESSENGER_ONE_CLICK_MESSAGE_BUTTON,"www_chat_null_state",["pages_messaging_www","PagesComms","OneClick"],{position:d,message:c});e.push(c);this.setState({loggedButtonImpressions:e})}});e.exports=c}),null);
__d("UFI2CommentingAsConstituentHeader.react",["React","UFICommentingAsConstituentHeader.react","cxMargin"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.uri;return b("React").jsx("div",{className:"_3-8t",children:b("React").jsx(b("UFICommentingAsConstituentHeader.react"),{uri:a})})}e.exports=a}),null);